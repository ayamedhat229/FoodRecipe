import{a as W,b as ne,c as ae}from"./chunk-G3J3LWCB.js";import{a as re}from"./chunk-JJQSEAUV.js";import{a as q,b as J,c as Q,e as X,f as Y,g as Z,h as ee,i as te,j as ie,k as oe}from"./chunk-N5TH54SU.js";import{Z as V,a as w,ba as $,ca as K,d as j,da as B,ea as L,ga as G,i as U,ja as H,n as z}from"./chunk-KPV4IS2N.js";import{m as E,n as N}from"./chunk-7GJXF5WO.js";import{$ as v,$a as m,$b as I,Ab as t,Bb as g,Eb as F,Fc as O,Ib as f,Ic as A,Jb as x,Jc as k,Sa as C,Sb as P,Tb as r,Ub as h,Vb as M,ab as d,bc as b,ia as S,ja as y,na as R,nb as _,oa as T,pb as p,zb as e}from"./chunk-5M6T3PC5.js";var le=(()=>{let i=class i{constructor(a,o){this.dialogRef=a,this.data=o,this.imagePath="https://upskilling-egypt.com/",this.DummyImage="../../../../../assets/images/deleteDialog.png"}onNoClick(){this.dialogRef.close()}ngOnInit(){}};i.\u0275fac=function(o){return new(o||i)(d($),d(K))},i.\u0275cmp=S({type:i,selectors:[["app-recipe-details"]],decls:19,vars:5,consts:[["id","recipeDetails",1,""],[1,"btnClose","w-100","d-block","text-end",3,"click"],[1,"fa-regular","fa-2xl","mt-3","p-3","text-danger","fa-circle-xmark"],[1,"picture","text-center"],[1,"DummyImage",3,"src"],[1,"pt-2"],[1,"text-black"],[1,"text-end","m-2"],[1,"btn","btn-outline-success","text-end",3,"mat-dialog-close"]],template:function(o,n){o&1&&(e(0,"section",0)(1,"a",1),f("click",function(){return n.onNoClick()}),g(2,"i",2),t(),e(3,"mat-dialog-content")(4,"h4"),r(5,"Recipe Details"),t(),e(6,"div",3),g(7,"img",4),t(),e(8,"div",5)(9,"h4",6),r(10),t(),e(11,"h4",6),r(12),t(),e(13,"h4",6),r(14),t(),g(15,"hr"),t()(),e(16,"div",7)(17,"button",8),r(18,"Add to Favorites"),t()()()),o&2&&(m(7),p("src",n.data.imagePath?n.imagePath+n.data.imagePath:n.DummyImage,C),m(3),M("1-Name:",n.data.name,""),m(2),M("2-Price:",n.data.price,""),m(2),M("3-Description:",n.data.description,""),m(3),p("mat-dialog-close",n.data.id))},dependencies:[L,G],styles:["#recipeDetails[_ngcontent-%COMP%]{width:600px}.picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px!important;text-align:center!important}.text-black[_ngcontent-%COMP%]{color:#666!important}i[_ngcontent-%COMP%]{width:400px!important}"]});let l=i;return l})();function de(l,i){if(l&1&&(e(0,"mat-option",18),r(1),t()),l&2){let s=i.$implicit;p("value",s.id),m(),h(s.name)}}function ge(l,i){if(l&1&&(e(0,"mat-option",18),r(1),t()),l&2){let s=i.$implicit;p("value",s.id),m(),h(s.name)}}function he(l,i){if(l&1&&(e(0,"span")(1,"td"),r(2),t()()),l&2){let s=i.$implicit;m(2),h(s.name)}}function ue(l,i){if(l&1){let s=F();e(0,"tr")(1,"td"),r(2),t(),e(3,"td"),g(4,"img",19),t(),e(5,"td"),r(6),t(),e(7,"td"),r(8),t(),_(9,he,3,1,"span",16),e(10,"td"),r(11),t(),e(12,"td"),r(13),I(14,"date"),t(),e(15,"td"),r(16),I(17,"date"),t(),e(18,"td")(19,"button",20)(20,"span"),g(21,"i",21),t()(),e(22,"mat-menu",null,22)(24,"button",23),f("click",function(){let n=R(s).$implicit,c=x();return T(c.openRecipeDetails(n))}),g(25,"i",24),e(26,"span",25),r(27,"View"),t()()()()()}if(l&2){let s=i.$implicit,a=P(23),o=x();m(2),h(s.name),m(2),p("src",s.imagePath?o.imagePath+s.imagePath:o.DummyImage,C),m(2),h(s.price),m(2),h(s.tag.name),m(),p("ngForOf",s.category),m(2),h(s.description),m(2),h(b(14,9,s.creationDate,"MMM d, y, h:mm:ss a")),m(3),h(b(17,12,s.modificationDate,"MMM d, y, h:mm:ss a")),m(3),p("matMenuTriggerFor",a)}}var me=(()=>{let i=class i{constructor(a,o,n,c,u,pe){this.toastr=a,this._recipeService=o,this.dialog=n,this._helperService=c,this._categoryService=u,this._userService=pe,this.tags=[],this.tableData=[],this.SearchKey="",this.imagePath="https://upskilling-egypt.com/",this.DummyImage="../../../assets/images/reciepePic.jpg",this.length=20,this.pageSize=5,this.pageNumber=1,this.pageIndex=0,this.pageSizeOptions=[5,10,20],this.tagId=0,this.categorieIds=0}getRecipes(){let a={pageSize:this.pageSize,pageNumber:this.pageNumber,name:this.SearchKey,tagId:this.tagId,categoryId:this.categorieIds};this._recipeService.getAllRecipes(a).subscribe({next:o=>{this.tableRecipes=o.data,console.log(o)},error:o=>{console.log(o)},complete:()=>{}})}openRecipeDetails(a){console.log(a),this.dialog.open(le,{data:a}).afterClosed().subscribe(n=>{console.log("The dialog was closed"),console.log(n),n&&this.addFavoriteRecipe(n)})}addFavoriteRecipe(a){this._userService.saveFavouriteRecipe(a).subscribe({next:o=>{console.log(o)},error:o=>{console.log(o),this.toastr.error("try again","Recipe not Added to Favorites")},complete:()=>{this.toastr.success("Success","Recipe Added to Favorites")}})}getAllTages(){this._helperService.getTags().subscribe({next:a=>{console.log(a),this.tags=a},error:a=>{console.log(a)},complete:()=>{}})}getAllCategories(){this._categoryService.getAllCartegories(1e3).subscribe({next:a=>{console.log(a),this.tableData=a.data}})}handlePageEvent(a){this.pageEvent=a,this.length=a.length,this.pageSize=a.pageSize,this.pageIndex=a.pageIndex,this.getRecipes()}ngOnInit(){this.getRecipes(),this.getAllTages(),this.getAllCategories()}};i.\u0275fac=function(o){return new(o||i)(d(N),d(ne),d(B),d(ae),d(W),d(re))},i.\u0275cmp=S({type:i,selectors:[["app-recipe-user"]],decls:51,vars:10,consts:[["id","header-recipe"],[1,"container"],[1,"row","align-items-center"],["id","addnewItem"],[1,"mt-3","row","justify-content-center","justify-content-between"],[1,"col-6"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"fa-solid","fa-search",2,"color","#8391A1"],["type","text","placeholder","Search by name","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"col-3"],["appearance","outline"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"table"],[1,"col"],[4,"ngFor","ngForOf"],["aria-label","Select page",3,"length","pageSize","pageIndex","pageSizeOptions","page"],[3,"value"],[1,"DummyImage",3,"src"],["mat-button","",3,"matMenuTriggerFor"],[1,"fa-solid","fa-ellipsis"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"fa-regular","fa-eye","p-1","primary"],[1,"primary"]],template:function(o,n){o&1&&(e(0,"section",0)(1,"div",1),g(2,"div",2),t()(),e(3,"section",3)(4,"div",2)(5,"div",4)(6,"div",5)(7,"div",6)(8,"span",7),g(9,"i",8),t(),e(10,"input",9),f("ngModelChange",function(u){return n.SearchKey=u})("keyup.enter",function(){return n.getRecipes()}),t()()(),e(11,"div",10)(12,"mat-form-field",11)(13,"mat-label"),r(14,"Search by Tags"),t(),e(15,"mat-select",12),f("ngModelChange",function(u){return n.tagId=u})("selectionChange",function(){return n.getRecipes()}),e(16,"mat-option"),r(17,"All"),t(),_(18,de,2,2,"mat-option",13),t()()(),e(19,"div",10)(20,"mat-form-field",11)(21,"mat-label"),r(22,"Search by Category"),t(),e(23,"mat-select",12),f("ngModelChange",function(u){return n.categorieIds=u})("selectionChange",function(){return n.getRecipes()}),e(24,"mat-option"),r(25,"All"),t(),_(26,ge,2,2,"mat-option",13),t()()(),e(27,"table",14)(28,"thead")(29,"tr")(30,"th",15),r(31,"Name"),t(),e(32,"th",15),r(33,"Images"),t(),e(34,"th",15),r(35,"Price"),t(),e(36,"th",15),r(37,"Tag"),t(),e(38,"th",15),r(39,"Category"),t(),e(40,"th",15),r(41,"Description"),t(),e(42,"th",15),r(43,"creationData"),t(),e(44,"th",15),r(45,"ModificationData"),t(),e(46,"th",15),r(47,"Action"),t()()(),e(48,"tbody"),_(49,ue,28,15,"tr",16),t()(),e(50,"mat-paginator",17),f("page",function(u){return n.handlePageEvent(u)}),t()()()()),o&2&&(m(10),p("ngModel",n.SearchKey),m(5),p("ngModel",n.tagId),m(3),p("ngForOf",n.tags),m(5),p("ngModel",n.categorieIds),m(3),p("ngForOf",n.tableData),m(23),p("ngForOf",n.tableRecipes),m(),p("length",n.length)("pageSize",n.pageSize)("pageIndex",n.pageIndex)("pageSizeOptions",n.pageSizeOptions))},dependencies:[O,w,j,H,J,q,Q,U,te,Y,X,Z,V,A]});let l=i;return l})();var fe=[{path:"recipe-user",component:me}],se=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=y({type:i}),i.\u0275inj=v({imports:[E.forChild(fe),E]});let l=i;return l})();var qe=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=y({type:i}),i.\u0275inj=v({imports:[k,se,oe,ie,z,ee]});let l=i;return l})();export{qe as RecipeUserModule};
