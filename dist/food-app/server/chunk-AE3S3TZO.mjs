import './polyfills.server.mjs';
import{a as X}from"./chunk-4X3DVHOT.mjs";import{a as H,b as J,c as K,d as Q}from"./chunk-XGRPUSNW.mjs";import{k as W}from"./chunk-ROI3HFMM.mjs";import{a as V,b as d,d as k,e as A,f as R,h as c,ia as B,j as q,l as G,m as O,n as L}from"./chunk-WLEBUI7C.mjs";import{a as $}from"./chunk-2SY5OC6K.mjs";import{o as j,p as T,q as x}from"./chunk-GZJXOSWJ.mjs";import{Cb as P,Gb as u,Hb as _,Hc as I,Ic as M,Lc as U,Oa as N,Rb as f,Ub as D,X as h,Xb as E,Za as m,_a as y,ea as v,fa as b,ja as w,ka as C,lb as F,nb as s,rb as z,xb as a,yb as n,zb as l}from"./chunk-T3NVKTYB.mjs";import"./chunk-VVCT4QZE.mjs";var Y=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=v({type:e,selectors:[["app-users"]],decls:0,vars:0,template:function(t,r){}});let i=e;return i})();function oe(i,e){i&1&&(a(0,"ngx-dropzone-label")(1,"span",23),f(2,"choose image"),n()())}function te(i,e){if(i&1&&(a(0,"ngx-dropzone-label"),l(1,"img",24),n()),i&2){let p=_();m(),s("src",p.imgSrc,N)}}function re(i,e){if(i&1){let p=P();a(0,"ngx-dropzone-image-preview",25),u("removed",function(){let r=w(p).$implicit,g=_();return C(g.onRemove(r))}),a(1,"ngx-dropzone-label"),f(2),n()()}if(i&2){let p=e.$implicit;s("file",p)("removable",!0),m(2),D("",p.name," (",p.type,")")}}var ne=()=>["/dashboard/home"],Z=(()=>{let e=class e{constructor(o,t,r){this._userService=o,this.toastr=t,this._Router=r,this.files=[],this.hiden=!0,this.imageUrl="https://upskilling-egypt.com/",this.profileForm=new R({userName:new c(null,[d.required]),email:new c(null,[d.required]),country:new c(null,[d.required]),phoneNumber:new c(null,[d.required]),confirmPassword:new c(null,[d.required]),profileImage:new c(null)})}ngOnInit(){this.getUser()}onSelect(o){this.imgSrc=o.addedFiles[0],this.profileForm.get("profileImage")?.setValue(this.imgSrc),console.log(o),this.files.push(...o.addedFiles)}onRemove(o){console.log(o),this.files.splice(this.files.indexOf(o),1)}onSubmit(o){console.log(o.value);let t=new FormData;t.append("userName",o.value.userName),t.append("email",o.value.email),t.append("country",o.value.country),t.append("phoneNumber",o.value.phoneNumber),t.append("confirmPassword",o.value.confirmPassword),t.append("profileImage",this.imgSrc,this.imgSrc.name),this._userService.updateUserProfile(t).subscribe({next:r=>{console.log(r)},error:r=>{console.log(r)},complete:()=>{this.toastr.success("Edit Profile SuccessFully","Success")}})}getUser(){this._userService.getCurrentUser().subscribe({next:o=>{console.log(o),this.userData=o},error:o=>{console.log(o)},complete:()=>{this.imgSrc=this.imageUrl+this.userData.imagePath,this.profileForm.patchValue({userName:this.userData.userName,email:this.userData.email,country:this.userData.country,phoneNumber:this.userData.phoneNumber,confirmPassword:this.userData.confirmPassword,profileImage:this.userData.imagePath})}})}};e.\u0275fac=function(t){return new(t||e)(y(X),y($),y(j))},e.\u0275cmp=v({type:e,selectors:[["app-profile"]],decls:36,vars:9,consts:[["id","fill-recipes"],[1,"form-body"],[3,"formGroup","ngSubmit"],[1,"container"],[1,"input-group","mb-3","w-75","m-auto"],["id","basic-addon1",1,"input-group-text"],[1,"fa-solid","fa-user",2,"color","#8391A1"],["formControlName","userName","type","text","placeholder","userName","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],[1,"fa-solid","fa-envelope",2,"color","#8391A1"],["formControlName","email","type","email","placeholder","email","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],["formControlName","confirmPassword","placeholder","Password","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"type"],[1,"show-password",3,"click"],[1,"fa-solid","primary"],[1,"fa-solid","fa-earth-africa",2,"color","#8391A1"],["formControlName","country","type","text","placeholder","country","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],[1,"fa-solid","fa-phone",2,"color","#8391A1"],["formControlName","phoneNumber","type","text","placeholder","phoneNumber","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],[1,"picture","w-75","m-auto",3,"change"],[4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn-cancal",3,"routerLink"],[1,"btn-main","ms-2"],[1,"text-success","p-1"],[1,"w-75",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"]],template:function(t,r){t&1&&(l(0,"section",0),a(1,"section",1)(2,"form",2),u("ngSubmit",function(){return r.onSubmit(r.profileForm)}),a(3,"div",3)(4,"div",4)(5,"span",5),l(6,"i",6),n(),l(7,"input",7),n(),a(8,"div",4)(9,"span",5),l(10,"i",8),n(),l(11,"input",9),n(),a(12,"div",4)(13,"span",5),l(14,"i",8),n(),l(15,"input",10),a(16,"a",11),u("click",function(){return r.hiden=!r.hiden}),l(17,"i",12),n()(),a(18,"div",4)(19,"span",5),l(20,"i",13),n(),l(21,"input",14),n(),a(22,"div",4)(23,"span",5),l(24,"i",15),n(),l(25,"input",16),n(),a(26,"ngx-dropzone",17),u("change",function(ie){return r.onSelect(ie)}),F(27,oe,3,0,"ngx-dropzone-label",18)(28,te,2,1,"ngx-dropzone-label",18)(29,re,3,4,"ngx-dropzone-image-preview",19),n(),l(30,"hr"),a(31,"div",20)(32,"button",21),f(33,"Cancel"),n(),a(34,"button",22),f(35,"Save"),n()()()()()),t&2&&(m(2),s("formGroup",r.profileForm),m(13),s("type",r.hiden?"password":"text"),m(2),z(r.hiden?"fa-eye-slash":"fa-eye"),m(10),s("ngIf",!r.imgSrc),m(),s("ngIf",r.imgSrc),m(),s("ngForOf",r.files),m(3),s("routerLink",E(8,ne)))},dependencies:[I,M,T,q,V,k,A,G,O,J,H,K]});let i=e;return i})();var ae=[{path:"",component:Y},{path:"profile",component:Z},{path:"",loadChildren:()=>import("./chunk-7FW5R2QS.mjs").then(i=>i.RecipeUserModule)},{path:"",loadChildren:()=>import("./chunk-BIQKJUS7.mjs").then(i=>i.FavoritesModule)}],ee=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b({type:e}),e.\u0275inj=h({imports:[x.forChild(ae),x]});let i=e;return i})();var Ee=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b({type:e}),e.\u0275inj=h({imports:[U,ee,W,B,Q,L]});let i=e;return i})();export{Ee as UsersModule};
